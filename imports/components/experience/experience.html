<div id="experience-template" ng-controller="ExperienceCtrl" class="ng-scope">
    <form name="experienceForm">
        <div>
            <h3 class="md-title">Experiencia Profesional</h3>
            <!-- ALIAS -->
            <div layout="row" layout-wrap>
               <div layout="column" flex="66">
                    <md-input-container class="register-input-container">
                        <label>Alias</label>
                        <input type="text" name="alias" ng-model="alias" required/>
                        <div ng-messages="experienceForm.alias.$error">
                            <div ng-message="required">Este campo es obligatorio</div>
                        </div>
                    </md-input-container>
                </div>
                <div layout="column" flex="33" ng-controller="ToastCtrl">
                    <md-button ng-click="showAliasToast()" class="md-accent text-left">
                    <md-icon style="margin-right: 5px;">
                        <i class="material-icons md-18" ng-bind=icon></i>
                    </md-icon>
                </md-button>
                </div>
            </div>

            <!-- PERFIL -->
            <div layout="row" layout-wrap>
               <div layout="column" flex="66" ng-controller="ProfileCtrl as ctrl">
                   <md-autocomplete flex
                    md-input-name="function"
                    md-input-minlength="2"
                    md-input-maxlength="18"
                    md-no-cache="ctrl.noCache"
                    md-selected-item="ctrl.selectedItem"
                    md-search-text="ctrl.searchText"
                    md-items="item in ctrl.querySearch(ctrl.searchText)"
                    md-item-text="item.display"
                    md-require-match
                    md-floating-label="Perfil / Función">
                      <md-item-template>
                        <span md-highlight-text="ctrl.searchText">{{item.display}}</span>
                      </md-item-template>
                    </md-autocomplete>
                </div>
                <div layout="column" ng-controller="SwitchCtrl" flex="33">
                    <md-switch ng-model="data.privacidad" ng-change="onChange(data.privacidad)">
                            {{ message }}
                    </md-switch> 
                </div>
             </div>

            <!-- TECNOLOGÍA -->
            <div layout="row" layout-wrap>
               <div layout="column" flex="66" ng-controller="TecnhologyCtrl" ng-cloak>
                      <md-input-container class="register-input-container selectdemoSelectHeader">
                        <label>Tecnologías Usadas</label>
                        <md-select ng-model="selectedTecnhology"
                                   md-on-close="clearSearchTerm()"
                                   data-md-container-class="selectdemoSelectHeader"
                                   multiple
                                   name="techno"
                                   required>
                          <md-select-header class="demo-select-header">
                            <input ng-model="searchTerm"
                                   type="search"
                                   name="techno"
                                   placeholder="Búsqueda de tecnologías..."
                                   class="demo-header-searchbox md-text">
                          </md-select-header>
                          <md-optgroup label="Tecnologias">
                            <md-option ng-value="techno" ng-repeat="techno in technologies |
                              filter:searchTerm">{{techno}}</md-option>
                          </md-optgroup>
                        </md-select>
                        <div ng-messages="experienceForm.techno.$error">
                            <div ng-message="required">Este campo es obligatorio</div>
                        </div>
                      </md-input-container>
                </div>
                <div layout="column" ng-controller="SwitchCtrl" flex="33">
                    <md-switch ng-model="data.privacidad" ng-change="onChange(data.privacidad)">
                            {{ message }}
                    </md-switch> 
                </div>
            </div>

            <!-- EMPRESA -->
            <div layout="row" layout-wrap>
                <div layout="column" flex="66">
                    <md-input-container class="register-input-container">
                        <label>Empresa</label>
                        <input type="text" name="company" ng-model="company" required/>
                        <div ng-messages="experienceForm.company.$error">
                            <div ng-message="required">Este campo es obligatorio</div>
                        </div>
                    </md-input-container>
                </div>
                <div layout="column" ng-controller="SwitchCtrl"  flex="33">
                    <md-switch ng-model="data.privacidad" ng-change="onChange(data.privacidad)">
                            {{ message }}
                    </md-switch> 
                </div>
            </div>

            <!-- SALARIO -->
            <div layout="row" layout-wrap>
                <div layout="column" flex="66">
                    <md-input-container class="register-input-container">
                        <label>Salario bruto anual(€)</label>
                        <input type="number" step="500" min="0" name="salary" ng-model="salary" required/>
                        <div ng-messages="experienceForm.salary.$error">
                            <div ng-message="required">Este campo es obligatorio</div>
                        </div>
                    </md-input-container> 
                </div>
                <div layout="column" ng-controller="SwitchCtrl" flex="33">
                    <md-switch ng-model="data.privacidad" ng-change="onChange(data.privacidad)">
                            {{ message }}
                    </md-switch> 
                </div>
             </div>

            <!-- ANTIGUEDAD -->
            <div layout="row" layout-wrap>
                <div layout="column" flex="50">
                    <md-datepicker name="initDate" id="init-datepicker" class="register-input-container" ng-model="initDate" md-placeholder="Inicio" md-max-date="maxDate" required>
                    </md-datepicker>
                    <div ng-messages="experienceForm.initDate.$error">
                            <div ng-message="required">Este campo es obligatorio</div>
                        </div>
                </div>
                <div layout="column" flex="50">
                    <md-datepicker name="endDate" id="end-datepicker" class="register-input-container" ng-model="endDate" md-placeholder="Fin" md-max-date="maxDate" required>
                    </md-datepicker>
                </div>
            </div>
            
        
            <div layout="row" ng-controller="ToastCtrl">
                <md-container layout-margin>
                    <md-checkbox class="link-experience-checkbox">
                            <span> Vincular experiencia al perfil</span>
                        </md-checkbox>
                    <md-button ng-click="showLinkToast()" class="md-accent text-left">
                    <md-icon>
                        <i class="material-icons md-18" ng-bind=icon></i>
                    </md-icon>
                </md-button>
               </md-container>
            </div>
             <!-- Add NEW EXPERIENCE template when click -->
            <div ng-if="!isEdit" layout="row" ng-init="openExperience=false">
                <md-container ng-if="openExperience == false">
                    <md-button class="md-accent" ng-click="newExperience(true)">
                        <md-icon style="margin-rigth: 5px;"><i class="material-icons">add</i></md-icon>
                        Añadir experiencia
                    </md-button>
                </md-container>
            </div>
            <div layout="column" ng-if="openExperience" ng-init="openExperience=false">
                    <md-divider class="primary"></md-divider>
                <div layout="row" layout-align="end center">
                    <md-button class="md-accent" ng-click="newExperience(false)">
                        <md-icon><i class="material-icons">close</i></md-icon> 
                    </md-button>
                    </div>
            </div>
            <span ng-if="openExperience" class="animate-if">
                <experience></experience>
            </span>
        </div>
    </form>
</div>

